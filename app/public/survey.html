<html>

<head>
  <script src="../../server.js"></script>
  <script src="https://code.jquery.com/jquery.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
</head>

<body>
<p><h1>Survey Questions</h1></p>
<br>
<p><h2><b>About You</b></h2></p>
<br>

<p>Name (Required)</p>
<p><input type="text" id="form-name"></p>
<p>Link to Photo Image (Required)</p>
<p><input type="text" id="photo-url"></p>

<form>
<p>Question 1</p>
<p>Your mind is always buzzing with unexplored ideas and plans.</p>
<p>
<select name="question1" id="question1">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 2</p>
<p>Generally speaking, you rely more on your experience than your imagination.</p>
<select name="question2" id="question2">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 3</p>
<p>You find it easy to stay relaxed and focused even when there is some pressure.</p>
<select name="question3" id="question3">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 4</p>
<p>You rarely do something just out of sheer curiosity.</p>
<select name="question4" id="question4">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 5</p>
<p>People can rarely upset you.</p>
<select name="question5" id="question5">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 6</p>
<p>It is often difficult for you to relate to other people’s feelings.</p>
<select name="question6" id="question6">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 7</p>
<p>In a discussion, truth should be more important than people’s sensitivities.</p>
<select name="question7" id="question7">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 8</p>
<p>You rarely get carried away by fantasies and ideas.</p>
<select name="question8" id="question8">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 9</p>
<p>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</p>
<select name="question9" id="question9">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 10</p>
<p>You feel more energetic after spending time with a group of people.</p>
<select name="question10" id="question10">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p><input type="submit" id="submit"></p>

</form>

<p><a href="api/friends">API Friends List</a> | <a href="">GitHub Repo</a></p>




<!-- ///////////////////////////////////////JAVASCRIPT//////////////////////////////////////////// -->

<script type="text/javascript">

var friends = [];
var responseScore; //????????????????????????????????????

$("#submit").on("click", function(event) {
    event.preventDefault();

    var newFriend = { //create new friend object
        name: $("#form-name").val().trim(),
        photoUrl: $("#photo-url").val().trim(),
        scores: [
            $("#question1").val().trim(),
            $("#question2").val().trim(),
            $("#question3").val().trim(),
            $("#question4").val().trim(),
            $("#question5").val().trim(),
            $("#question6").val().trim(),
            $("#question7").val().trim(),
            $("#question8").val().trim(),
            $("#question9").val().trim(),
            $("#question10").val().trim()
        ]
    };

    friends.push(newFriend); //add new friend object to array
    console.log(friends);


    function calculateMatch() { //compare array of scores to those of other friends
        var scoreArray = newFriend.scores;
        for (var i=0; i<friends.length; i++) { //compare scores to those of each of the other friends
            for (var j=0; j<scoreArray.length; j++) {
                var diff = scoreArray[j] - friends[i].scores[j]; //calculate difference between each score for each friend
                var absDiff = Math.abs(diff); //get absolute value
                var diffArray = []; //array of differences
                diffArray.push(absDiff);
                var totalDifference = diffArray.reduce(function(total, amount) {
                    return total + amount; //calculate sum of score differences
                    console.log(totalDifference);
                });
                totalDifference.data("friendName", friends[i].name); //match total diff with friend name
                var totalDifferenceArray = [];
                totalDifferenceArray.push(totalDifference);
                totalDifferenceArray.sort();
                var match = totalDifferenceArray[0].friendName; //does it still have the friendName attribute???????????????????????????????????
                console.log("Your best match is " + match + "!");
            }
        }
    }
    calculateMatch();
    //console.log(newFriend);


    $.post("/api/friends", newFriend, function(data) { //routing js file determines whether table is available or now; if so, it returns data; if not, it doesn't
        //$("#matchName").text(data.name); ///////////////////////////
        //$("#matchPic").attr("src", data.profilePic); ////////////////////////
    });

    function clear() { //clear form
        $("#form-name").val("");
        $("#photo-url").val("");
        $("#question1").val("");
        $("#question2").val("");
        $("#question3").val("");
        $("#question4").val("");
        $("#question5").val("");
        $("#question6").val("");
        $("#question7").val("");
        $("#question8").val("");
        $("#question9").val("");
        $("#question10").val("")
    };
    clear();

});


//NEED MODAL WITH NAME & PHOTO!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!


</script>



</body>
</html>