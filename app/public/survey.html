<html>

<head>
  <script src="../data/friends.js"></script>
  <script src="../../server.js"></script>
  <script src="https://code.jquery.com/jquery.js"></script>
</head>

<body>

<p><h1>Survey Questions</h1></p>

<br>

<p><h2><b>About You</b></h2></p>

<br>

<p>Name (Required)</p>
<p><input type="text" id="form-name"></p>

<p>Link to Photo Image (Required)</p>
<p><input type="text" id="photo-url"></p>

<form>

<p>Question 1</p>
<p>Your mind is always buzzing with unexplored ideas and plans.</p>
<p>
<select name="question1">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 2</p>
<p>Generally speaking, you rely more on your experience than your imagination.</p>
<select name="question2">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 3</p>
<p>You find it easy to stay relaxed and focused even when there is some pressure.</p>
<select name="question3">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 4</p>
<p>You rarely do something just out of sheer curiosity.</p>
<select name="question4">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 5</p>
<p>People can rarely upset you.</p>
<select name="question5">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 6</p>
<p>It is often difficult for you to relate to other people’s feelings.</p>
<select name="question6">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 7</p>
<p>In a discussion, truth should be more important than people’s sensitivities.</p>
<select name="question7">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 8</p>
<p>You rarely get carried away by fantasies and ideas.</p>
<select name="question8">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 9</p>
<p>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</p>
<select name="question9">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p>Question 10</p>
<p>You feel more energetic after spending time with a group of people.</p>
<select name="question10">
    <option selected="selected">Select an Option</option>
    <option value="1">1 (Strongly Disagree)</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5 (Strongly Agree)</option>
</select>
</p>

<br>

<p><input type="submit" id="submit"></p>

</form>

<p><a href="../data/friends.js">API Friends List</a> | <a href="">GitHub Repo</a></p>




<!-- ///////////////////////////////////////JAVASCRIPT//////////////////////////////////////////// -->

<script type="text/javascript">

var friends = [];
var responseScore; //????????????????????????????????????

$("#submit").on("click", function(event) {
    event.preventDefault();

    // GRAB OPTION VALUE AND PUSH TO SCORES --
    // $([value="1"]) etc.????????????????????????????????????????

    var newFriend = { //create new friend object
        name: $("#form-name").val().trim(),
        photoUrl: $("#photo-url").val().trim(),
        scores: []
    };

    friends.push(newFriend); //add new friend object to array
    //console.log(friends);

    $.post("/api/friends", newFriend, function(data) { //routing js file determines whether table is available or now; if so, it returns data; if not, it doesn't
        if (data) {
            alert("Thanks for posting!"); //post worked; there were open tables so data came back
        } else {
            alert("Error!"); //post didn't work; there were no open tables so data did not come back?
        };
        console.log(data);
    });

    function calculateMatch() { //compare array of scores to those of other friends
        var scoreList = newFriend.scores;
        var scoreArray = scoreList.ToArray;
        for (var i=0; i<friends.length; i++) { //compare scores to those of each of the other friends
            for (var j=0; j<scoreArray.length; j++) {
                var diff = scoreArray[j] - friends[i].scores[j]; //calculate difference between each score for each friend
                var absDiff = Math.abs(diff); //get absolute value
                var diffArray = []; //array of differences
                diffArray.push(absDiff);
                for (var x=0; x<diffArray; x++) { //calculate sum of differences
                    var totalDifference;
                    totalDifference += diffArray[i]; //total compatibility differential
                    console.log(totalDifference); 
                    totalDifference.data("friendName", friends[i].name); //how to identify which friend this goes with????????????????????????????
                    var totalDifferenceArray = [];
                    totalDifferenceArray.push(totalDifference);
                    var min = Math.min.apply(Math, totalDifferenceArray);
                    var match = min.friendName; //?????????????????????????????????????
                    console.log("Your best match is " + match); //NEED MODAL WITH NAME & PHOTO!!!!!!!!!!!!!!1!!!!!!!!!!!!!!!!!!!!!!!!!
                    return match; //find lowest score in array and print name of friend
                }
            }
        }
    };
    calculateMatch();


    function clear() { //clear form
        $("#form-name").val("");
        $("#photo-url").val("");
    };
    clear();

});

</script>



</body>
</html>